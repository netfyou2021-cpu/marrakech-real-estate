# üöÄ Deploy to Production NOW - Complete Guide

## Step 1: Deploy to Vercel (5 minutes)

### A. Quick Deploy Button
1. Go to: https://vercel.com/new
2. Click "Import Git Repository"
3. Paste your GitHub URL: `https://github.com/netfyou2021-cpu/marrakech-real-estate`
4. Click "Import"
5. Click "Deploy" (no build settings needed)
6. ‚úÖ Your site will be live at: `https://your-project.vercel.app`

### B. Or Use Vercel CLI
```bash
# Login to Vercel
vercel login

# Deploy
cd /workspaces/marrakech-real-estate
vercel --prod
```

---

## Step 2: Create Database (3 minutes)

### Option A: Neon Database (Free & Fast)

1. **Go to Neon**: https://neon.tech/
2. **Sign up** with GitHub
3. **Create New Project**:
   - Project name: `marrakech-real-estate`
   - Region: Choose Frankfurt or Amsterdam (closest to Morocco)
   - Click "Create Project"

4. **Copy Connection String**:
   - You'll see a connection string like: 
     ```
     postgresql://user:password@ep-cool-name.eu-central-1.aws.neon.tech/neondb
     ```
   - Copy this entire string

5. **Initialize Database**:
   ```bash
   # Install PostgreSQL client
   npm install -g pg
   
   # Connect and run init script
   psql "your-connection-string-here" -f init-db.sql
   ```

6. **Add to Vercel**:
   - Go to Vercel Dashboard ‚Üí Your Project ‚Üí Settings ‚Üí Environment Variables
   - Add variable:
     - Name: `DATABASE_URL`
     - Value: Your Neon connection string
     - Save
   - Click "Redeploy" to apply changes

### Option B: Vercel Postgres (Also Free)

1. Go to Vercel Dashboard ‚Üí Your Project
2. Click **Storage** tab
3. Click **Create Database** ‚Üí **Postgres**
4. Database name: `marrakech-db`
5. Region: Frankfurt (eu-central-1)
6. Click **Create**
7. Go to **Query** tab
8. Copy and paste contents of `init-db.sql`
9. Click **Execute**

‚úÖ Done! Vercel automatically injects `DATABASE_URL` into your app

---

## Step 3: Add Custom Domain (Optional)

1. **Buy Domain** (if you don't have one):
   - Namecheap: $12/year for .com
   - Morocco domain (.ma): ~200 MAD/year

2. **Add to Vercel**:
   - Vercel Dashboard ‚Üí Your Project ‚Üí Settings ‚Üí Domains
   - Add your domain: `atlasrealestate.com`
   - Follow DNS instructions

3. **Update DNS** (at your domain registrar):
   ```
   Type: CNAME
   Name: @
   Value: cname.vercel-dns.com
   
   Type: CNAME
   Name: www
   Value: cname.vercel-dns.com
   ```

4. **Wait 5-10 minutes** for DNS propagation
5. ‚úÖ SSL certificate auto-generated by Vercel

---

## Step 4: Test Your Production Site

1. **Visit your URL**: `https://your-project.vercel.app`
2. **Test features**:
   - ‚úÖ Homepage loads
   - ‚úÖ Search works
   - ‚úÖ Filters work
   - ‚úÖ Property listings show (from database)
   - ‚úÖ Map displays
   - ‚úÖ Language switcher works

3. **Access Admin Panel**: `https://your-project.vercel.app/admin.html`
   - Generate admin token: `openssl rand -hex 32`
   - Add as environment variable in Vercel: `ADMIN_TOKEN=your-token`
   - Redeploy
   - Login with token

---

## Quick Verification Checklist

- [ ] Site deployed to Vercel
- [ ] Database created (Neon or Vercel Postgres)
- [ ] `init-db.sql` executed
- [ ] `DATABASE_URL` added to Vercel environment variables
- [ ] Site redeployed with database
- [ ] Homepage shows 6 sample listings
- [ ] Search and filters work
- [ ] Admin panel accessible
- [ ] Custom domain added (optional)

---

## Environment Variables Needed

Add these in Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables:

```env
DATABASE_URL=postgresql://user:pass@host/db
ADMIN_TOKEN=your-secure-token-here
PORT=3000
```

---

## Database Connection Strings

Your app supports multiple environment variable names:
- `DATABASE_URL` (standard)
- `POSTGRES_URL` (Vercel Postgres)
- `POSTGRES_PRISMA_URL` (Vercel Postgres)

Use any of these names - the app will detect automatically.

---

## Troubleshooting

**Problem**: Site shows "Using in-memory storage"
- **Fix**: Add `DATABASE_URL` to Vercel environment variables and redeploy

**Problem**: Database connection error
- **Fix**: Check connection string is correct and database exists

**Problem**: No listings showing
- **Fix**: Run `init-db.sql` to create tables and add sample data

**Problem**: Admin panel not working
- **Fix**: Add `ADMIN_TOKEN` environment variable and redeploy

---

## Update Production Site

```bash
# Make changes locally
git add .
git commit -m "Update"
git push

# Vercel auto-deploys on push
# Or manually: vercel --prod
```

---

## Your Live URLs

After deployment:
- **Website**: `https://your-project.vercel.app`
- **Admin Panel**: `https://your-project.vercel.app/admin.html`
- **API**: `https://your-project.vercel.app/api/listings`

---

## üéâ You're Live!

Your production site now has:
- ‚úÖ Fast global CDN (Vercel)
- ‚úÖ Automatic HTTPS
- ‚úÖ PostgreSQL database
- ‚úÖ Dynamic listings
- ‚úÖ Admin management
- ‚úÖ 99.9% uptime
- ‚úÖ Zero cost (free tier)

**Share your URL and start adding real properties!** üè†
